# Changelog API –°–µ—Ä–≤–µ—Ä–∞ v1.1.0

**–î–∞—Ç–∞:** 23 —Ñ–µ–≤—Ä–∞–ª—è 2026

---

## üÜï –ù–æ–≤—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

### 1. –ü–∞–≥–∏–Ω–∞—Ü–∏—è –¥–ª—è –ø—É–±–ª–∏—á–Ω–æ–≥–æ API –¥–æ–º–æ–≤

**–≠–Ω–¥–ø–æ–∏–Ω—Ç:** `GET /api/v1/houses`

#### –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –∑–∞–ø—Ä–æ—Å–∞

| –ü–∞—Ä–∞–º–µ—Ç—Ä | –¢–∏–ø | –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é | –û–ø–∏—Å–∞–Ω–∏–µ |
|----------|-----|--------------|----------|
| `page` | number | 1 | –ù–æ–º–µ—Ä —Å—Ç—Ä–∞–Ω–∏—Ü—ã |
| `limit` | number | 50 | –ó–∞–ø–∏—Å–µ–π –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ (max: 100) |
| `offset` | number | - | –°–º–µ—â–µ–Ω–∏–µ (–∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞ page) |
| `rooms` | string | - | –§–∏–ª—å—Ç—Ä –ø–æ –∫–æ–º–Ω–∞—Ç–∞–º |
| `areaMin` | number | - | –ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è –ø–ª–æ—â–∞–¥—å |
| `areaMax` | number | - | –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –ø–ª–æ—â–∞–¥—å |
| `priceMin` | number | - | –ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è —Ü–µ–Ω–∞ |
| `priceMax` | number | - | –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è —Ü–µ–Ω–∞ |

#### –§–æ—Ä–º–∞—Ç –æ—Ç–≤–µ—Ç–∞

```json
{
  "data": [
    {
      "id": 1,
      "name": "–î–æ–º ‚Ññ1",
      "area": "120 –º¬≤",
      "rooms": "3",
      "price_from": 4500000,
      ...
    }
  ],
  "pagination": {
    "page": 1,
    "limit": 50,
    "offset": 0,
    "total": 42,
    "totalPages": 1,
    "hasNextPage": false,
    "hasPrevPage": false
  }
}
```

#### –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

```bash
# –ü–æ–ª—É—á–∏—Ç—å –ø–µ—Ä–≤—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É (50 –∑–∞–ø–∏—Å–µ–π)
curl https://admin-doman-horizont.ru/api/v1/houses

# –ü–æ–ª—É—á–∏—Ç—å –≤—Ç–æ—Ä—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É
curl https://admin-doman-horizont.ru/api/v1/houses?page=2

# –ü–æ–ª—É—á–∏—Ç—å 20 –∑–∞–ø–∏—Å–µ–π –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ
curl https://admin-doman-horizont.ru/api/v1/houses?limit=20

# –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å offset
curl https://admin-doman-horizont.ru/api/v1/houses?offset=20&limit=10

# –§–∏–ª—å—Ç—Ä –ø–æ –ø–ª–æ—â–∞–¥–∏
curl "https://admin-doman-horizont.ru/api/v1/houses?areaMin=50&areaMax=100"

# –ö–æ–º–±–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Ñ–∏–ª—å—Ç—Ä—ã
curl "https://admin-doman-horizont.ru/api/v1/houses?rooms=2&areaMin=60&page=1&limit=20"
```

---

### 2. –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–∂–∞—Ç–∏–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π

–í—Å–µ –∑–∞–≥—Ä—É–∂–∞–µ–º—ã–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É—é—Ç—Å—è –≤ WebP.

#### –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ø–æ —Ç–∏–ø—É –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è

| –¢–∏–ø | –†–∞–∑–º–µ—Ä | –ö–∞—á–µ—Å—Ç–≤–æ | –§–æ—Ä–º–∞—Ç |
|-----|--------|----------|--------|
| `house-main` | 1200x800 | 85% | WebP |
| `house-gallery` | 1200x800 | 80% | WebP |
| `floor-plan` | 2000x2000 | 90% | WebP |
| `package-image` | 800x600 | 85% | WebP |
| `project-image` | 1200x800 | 85% | WebP |
| `project-gallery` | 1200x800 | 80% | WebP |

#### –§–æ—Ä–º–∞—Ç –æ—Ç–≤–µ—Ç–∞ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ

```json
{
  "message": "–§–∞–π–ª —É—Å–ø–µ—à–Ω–æ –∑–∞–≥—Ä—É–∂–µ–Ω",
  "filePath": "floor-plan-1708698000000-123456789.webp",
  "fileName": "floor-plan-1708698000000-123456789.webp",
  "originalName": "plan.png",
  "size": 245678,
  "compressed": true,
  "compressionInfo": {
    "compressed": true,
    "path": "/path/to/file",
    "size": 245678
  }
}
```

#### –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏

- **SVG —Ñ–∞–π–ª—ã –Ω–µ —Å–∂–∏–º–∞—é—Ç—Å—è** (—Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –∫–∞–∫ –µ—Å—Ç—å)
- **Fallback –ø—Ä–∏ –æ—à–∏–±–∫–µ** - —Ñ–∞–π–ª —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –±–µ–∑ —Å–∂–∞—Ç–∏—è
- **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ** —Å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ–º –ø—Ä–æ–ø–æ—Ä—Ü–∏–π
- **–°–∂–∞—Ç–∏–µ —Ç–æ–ª—å–∫–æ –¥–ª—è —Ñ–∞–π–ª–æ–≤ > 500KB**

---

## üîÑ –ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö —ç–Ω–¥–ø–æ–∏–Ω—Ç–∞—Ö

### GET /api/v1/houses

**–î–æ:**
```json
[
  { "id": 1, "name": "..." },
  { "id": 2, "name": "..." }
]
```

**–ü–æ—Å–ª–µ:**
```json
{
  "data": [
    { "id": 1, "name": "..." },
    { "id": 2, "name": "..." }
  ],
  "pagination": {
    "page": 1,
    "limit": 50,
    "offset": 0,
    "total": 42,
    "totalPages": 1,
    "hasNextPage": false,
    "hasPrevPage": false
  }
}
```

‚ö†Ô∏è **BREAKING CHANGE:** –§–æ—Ä–º–∞—Ç –æ—Ç–≤–µ—Ç–∞ –∏–∑–º–µ–Ω–µ–Ω. –î–∞–Ω–Ω—ã–µ —Ç–µ–ø–µ—Ä—å –≤ –ø–æ–ª–µ `data`.

---

## ‚ö° –£–ª—É—á—à–µ–Ω–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

### –§–∏–ª—å—Ç—Ä—ã –Ω–∞ —É—Ä–æ–≤–Ω–µ SQL

–§–∏–ª—å—Ç—Ä—ã –ø–æ –ø–ª–æ—â–∞–¥–∏ –∏ —Ü–µ–Ω–µ —Ç–µ–ø–µ—Ä—å –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è –Ω–∞ —É—Ä–æ–≤–Ω–µ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö:

```sql
SELECT * FROM houses
WHERE 
  CAST(area AS INTEGER) BETWEEN ? AND ?
  AND price_from BETWEEN ? AND ?
LIMIT ? OFFSET ?
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
- –ë—ã—Å—Ç—Ä–µ–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –∑–∞–ø—Ä–æ—Å–æ–≤
- –ú–µ–Ω—å—à–µ –Ω–∞–≥—Ä—É–∑–∫–∞ –Ω–∞ —Å–µ—Ä–≤–µ—Ä
- –≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–µ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø–∞–º—è—Ç–∏

### –°–∂–∞—Ç–∏–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π

- –£–º–µ–Ω—å—à–µ–Ω–∏–µ —Ä–∞–∑–º–µ—Ä–∞ –Ω–∞ 60-80%
- –£—Å–∫–æ—Ä–µ–Ω–∏–µ –∑–∞–≥—Ä—É–∑–∫–∏ —Å—Ç—Ä–∞–Ω–∏—Ü
- –≠–∫–æ–Ω–æ–º–∏—è —Ç—Ä–∞—Ñ–∏–∫–∞ –∏ –¥–∏—Å–∫–æ–≤–æ–≥–æ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–∞

---

## üì¶ –ù–æ–≤—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

```json
{
  "sharp": "^0.33.5"
}
```

–£—Å—Ç–∞–Ω–æ–≤–∫–∞:
```bash
npm install sharp@^0.33.5
```

---

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–∞–≥–∏–Ω–∞—Ü–∏–∏

```bash
# –ü–æ–ª—É—á–∏—Ç—å –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ –ø–∞–≥–∏–Ω–∞—Ü–∏–∏
curl https://admin-doman-horizont.ru/api/v1/houses | jq '.pagination'

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –æ–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ
curl https://admin-doman-horizont.ru/api/v1/houses?limit=1 | jq '.pagination.total'

# –ù–∞–≤–∏–≥–∞—Ü–∏—è –ø–æ —Å—Ç—Ä–∞–Ω–∏—Ü–∞–º
curl https://admin-doman-horizont.ru/api/v1/houses?page=2&limit=10 | jq '.data | length'
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ñ–∏–ª—å—Ç—Ä–æ–≤

```bash
# –§–∏–ª—å—Ç—Ä –ø–æ –ø–ª–æ—â–∞–¥–∏
curl "https://admin-doman-horizont.ru/api/v1/houses?areaMin=80&areaMax=120" | jq '.data[].area'

# –§–∏–ª—å—Ç—Ä –ø–æ —Ü–µ–Ω–µ
curl "https://admin-doman-horizont.ru/api/v1/houses?priceMin=3000000&priceMax=5000000" | jq '.data[].price_from'

# –ö–æ–º–±–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Ñ–∏–ª—å—Ç—Ä—ã
curl "https://admin-doman-horizont.ru/api/v1/houses?rooms=3&areaMin=100&priceMax=6000000" | jq '.pagination.total'
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–∂–∞—Ç–∏—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π

```bash
# –ó–∞–≥—Ä—É–∑–∏—Ç—å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ
curl -X POST https://admin-doman-horizont.ru/api/upload/floor-plan \
  -H "Authorization: Bearer YOUR_TOKEN" \
  -F "floorPlan=@/path/to/image.png" | jq '.compressed'

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–∞–∑–º–µ—Ä —Ñ–∞–π–ª–∞
curl -I https://admin-doman-horizont.ru/uploads/floor-plan-XXX.webp | grep Content-Length
```

---

## üêõ –ò–∑–≤–µ—Å—Ç–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

1. **SVG –Ω–µ —Å–∂–∏–º–∞—é—Ç—Å—è** - –ø–æ –¥–∏–∑–∞–π–Ω—É, SVG –æ—Å—Ç–∞—é—Ç—Å—è –∫–∞–∫ –µ—Å—Ç—å
2. **Fallback –ø—Ä–∏ –æ—à–∏–±–∫–µ —Å–∂–∞—Ç–∏—è** - —Ñ–∞–π–ª —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –±–µ–∑ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏

---

## üìã TODO

- [ ] –î–æ–±–∞–≤–∏—Ç—å –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞ —É—Ä–æ–≤–Ω–µ —Å–µ—Ä–≤–µ—Ä–∞
- [ ] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –ø–æ—Å—Ç—Ä–∞–Ω–∏—á–Ω—É—é –∑–∞–≥—Ä—É–∑–∫—É (infinite scroll)
- [ ] –î–æ–±–∞–≤–∏—Ç—å —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫—É —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
- [ ] –ü–∞–∫–µ—Ç–Ω–æ–µ —Å–∂–∞—Ç–∏–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
- [ ] –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Ä–∞–∑–º–µ—Ä–æ–≤ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π

---

## üîó –°–≤—è–∑–∞–Ω–Ω—ã–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã

- [API Usage (–∫–ª–∏–µ–Ω—Ç)](./API_USAGE.md)
- [API Update (–º–∏–≥—Ä–∞—Ü–∏—è)](./API_UPDATE.md)

---

## üìå –í–µ—Ä—Å–∏–∏

- **API Version:** v1.1.0
- **Release Date:** 23 —Ñ–µ–≤—Ä–∞–ª—è 2026
- **Previous Version:** v1.0.0
